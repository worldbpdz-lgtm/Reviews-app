// prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

/* Shopify app sessions (required by @shopify/shopify-app-session-storage-prisma) */
model Session {
  id          String   @id
  shop        String
  state       String
  isOnline    Boolean
  scope       String?
  expires     DateTime?
  accessToken String?
  userId      BigInt?

  // Added fields for Shopify v7+
  firstName     String?
  lastName      String?
  email         String?
  accountOwner  Boolean?
  locale        String?
  collaborator  Boolean?
  emailVerified Boolean?
}


/* Your reviews table (example – keep what you already have) */
model Review {
  id             String   @id @default(cuid())
  shopDomain     String
  productId      BigInt
  productHandle  String?
  rating         Int
  title          String?
  body           String

  // First name only (what you called “Name” in the form)
  authorName     String

  // Family name (optional)
  authorLastName String?

  // Optional email
  authorEmail    String?

  // Optional media (we can later split into image/video if needed)
  mediaUrl       String?

  status         ReviewStatus
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

enum ReviewStatus {
  pending
  approved
  trashed   // replaces `rejected`
}

